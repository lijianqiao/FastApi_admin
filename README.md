# FastAPI Base - ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿ

åŸºäº FastAPI æ¡†æ¶æ„å»ºçš„ç°ä»£åŒ–ä¼ä¸šçº§åå°ç®¡ç†ç³»ç»Ÿåç«¯ APIï¼Œé‡‡ç”¨åˆ†å±‚æ¶æ„è®¾è®¡ï¼Œå…·å¤‡é«˜æ€§èƒ½ã€å¼ºå®‰å…¨æ€§ã€æ˜“ç»´æŠ¤ã€æ˜“æ‰©å±•ç­‰ç‰¹ç‚¹ã€‚

## âœ¨ ä¸»è¦ç‰¹æ€§

- ğŸš€ **é«˜æ€§èƒ½**: åŸºäº FastAPI + SQLAlchemy 2.0 å¼‚æ­¥æ¶æ„
- ğŸ” **å®‰å…¨å¯é **: JWTè®¤è¯ã€RBACæƒé™ã€Tokené»‘åå•ã€è¾“å…¥æ ¡éªŒ
- ğŸ“Š **ç¼“å­˜ä¼˜åŒ–**: Redisç¼“å­˜å±‚ï¼Œæƒé™éªŒè¯æ€§èƒ½æå‡80%
- ğŸ” **å®Œæ•´å®¡è®¡**: æ“ä½œæ—¥å¿—è®°å½•ä¸æŸ¥è¯¢ï¼Œæ”¯æŒå®¡è®¡è¿½è¸ª
- ğŸ“ˆ **ç›‘æ§æŒ‡æ ‡**: Prometheusé›†æˆï¼Œå¥åº·æ£€æŸ¥å’Œæ€§èƒ½ç›‘æ§
- ğŸ—ï¸ **åˆ†å±‚æ¶æ„**: æ¸…æ™°çš„åˆ†å±‚è®¾è®¡ï¼Œæ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **è¯­è¨€æ¡†æ¶**: Python 3.13+ / FastAPI 0.115.12
- **æ•°æ®åº“**: SQLAlchemy 2.0+ (å¼‚æ­¥ORM) / SQLite/PostgreSQL
- **ç¼“å­˜**: Redis (æƒé™ç¼“å­˜ã€Tokené»‘åå•ã€é™æµ)
- **è®¤è¯**: JWT (RS256) + RBACæƒé™æ¨¡å‹
- **æ•°æ®æ ¡éªŒ**: Pydantic v2
- **æ•°æ®åº“è¿ç§»**: Alembic
- **ç›‘æ§**: Prometheus + ç»“æ„åŒ–æ—¥å¿—
- **å¼€å‘å·¥å…·**: Ruffã€Blackã€pytest

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ uv åŒ…ç®¡ç†å™¨ï¼ˆæ¨èï¼‰

```cmd
# å®‰è£…uvåŒ…ç®¡ç†å™¨ (å¦‚æœæœªå®‰è£…)
pip install uv

# å…‹éš†é¡¹ç›®å¹¶è¿›å…¥ç›®å½•
# Gitee
git clone https://gitee.com/lijianqiao/fastapibase.git

# Github
git clone https://github.com/lijianqiao/FastApi_admin.git
cd fastapi-base

# ä½¿ç”¨uvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–ï¼ˆä¸€æ­¥åˆ°ä½ï¼‰
uv sync

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.venv\Scripts\activate
# Linux/macOS  
source .venv/bin/activate

# æˆ–è€…æ‰‹åŠ¨ç®¡ç†ä¾èµ–
uv venv                                  # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
uv pip install -r requirements/dev.txt  # å®‰è£…å¼€å‘ä¾èµ–
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ä¼ ç»Ÿ pip

```cmd
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.venv\Scripts\activate
# Linux/macOS
source .venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements/dev.txt
```

> **æ³¨æ„**: é¡¹ç›®å·²é…ç½® `pyproject.toml`ï¼Œæ¨èä½¿ç”¨ `uv sync` æ¥ç®¡ç†ä¾èµ–ï¼Œå®ƒä¼šè‡ªåŠ¨åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…æ‰€æœ‰å¿…è¦çš„ä¾èµ–åŒ…ã€‚

### 2. Redis é…ç½®

ç³»ç»Ÿéœ€è¦Redisä½œä¸ºç¼“å­˜æœåŠ¡ï¼š

```cmd
# ä½¿ç”¨Dockerè¿è¡ŒRedis
docker run --name redis -p 6379:6379 -d redis:7-alpine

# æˆ–è€…å®‰è£…æœ¬åœ°RedisæœåŠ¡
# Windows: ä¸‹è½½å¹¶å®‰è£…Redis for Windows
# ç¡®ä¿RedisæœåŠ¡åœ¨ localhost:6379 ä¸Šè¿è¡Œ
```

### 3. ç¯å¢ƒé…ç½®

```cmd
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
copy .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œé…ç½®å¿…è¦å‚æ•°
```

å…³é”®é…ç½®é¡¹ï¼š
```bash
# æ•°æ®åº“é…ç½®
DATABASE_URL=sqlite:///./fastapi_base.db

# Redisç¼“å­˜é…ç½®  
REDIS_URL=redis://localhost:6379/0

# JWTå¯†é’¥é…ç½®
JWT_SECRET_KEY=your-super-secret-key-here

# åº”ç”¨é…ç½®
APP_NAME=FastAPI Base
DEBUG=true
ENVIRONMENT=development
```

### 4. æ•°æ®åº“åˆå§‹åŒ–

```cmd
# æ‰§è¡Œæ•°æ®åº“è¿ç§»
alembic upgrade head

# åˆå§‹åŒ–åŸºç¡€æ•°æ®ï¼ˆæƒé™ã€è§’è‰²ã€ç®¡ç†å‘˜ï¼‰
python init_data.py --help # æŸ¥çœ‹ä½¿ç”¨æ–¹æ³•

# ============================================================
# ğŸ“š æ•°æ®åº“åˆå§‹åŒ–å·¥å…·
# ============================================================
# ç”¨æ³•:
#   python init_data.py              # åˆå§‹åŒ–æ•°æ®åº“ï¼ˆä¿ç•™ç°æœ‰æ•°æ®ï¼‰
#   python init_data.py --reset      # é‡ç½®æ•°æ®åº“ï¼ˆæ¸…ç©ºå¹¶é‡æ–°åˆå§‹åŒ–ï¼‰
#   python init_data.py --help       # æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯

# è¯´æ˜:
#   â€¢ åˆå§‹åŒ–æ¨¡å¼ï¼šåªåˆ›å»ºä¸å­˜åœ¨çš„æ•°æ®ï¼Œä¿ç•™ç°æœ‰æ•°æ®
#   â€¢ é‡ç½®æ¨¡å¼ï¼šæ¸…ç©ºæ‰€æœ‰æ•°æ®åé‡æ–°åˆå§‹åŒ–
# ============================================================
```

### 5. å¯åŠ¨åº”ç”¨

```cmd
# å¼€å‘æ¨¡å¼è¿è¡Œ
python main.py

# æˆ–ä½¿ç”¨ uvicorn
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

### 6. è®¿é—®åº”ç”¨

- **åº”ç”¨åœ°å€**: http://localhost:8000
- **APIæ–‡æ¡£**: http://localhost:8000/docs (Swagger UI)
- **ç›‘æ§æŒ‡æ ‡**: http://localhost:8000/metrics

### 7. é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·

```
ç”¨æˆ·å: admin
å¯†ç : admin@123
è§’è‰²: è¶…çº§ç®¡ç†å‘˜
```

âš ï¸ **é‡è¦**: é¦–æ¬¡ç™»å½•åè¯·ç«‹å³ä¿®æ”¹é»˜è®¤å¯†ç ï¼

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### åˆ†å±‚æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API Layer                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   Routes    â”‚ â”‚ Middlewares â”‚ â”‚      Dependencies       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Service Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ UserService â”‚ â”‚ AuthService â”‚ â”‚     CacheService        â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Repository Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ UserRepo    â”‚ â”‚ RoleRepo    â”‚ â”‚    PermissionRepo       â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Data Layer                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Database   â”‚ â”‚    Redis    â”‚ â”‚        Models           â”‚â”‚
â”‚  â”‚ (SQLAlchemy)â”‚ â”‚   (Cache)   â”‚ â”‚      (ORM)              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

- **æ¨¡å‹å±‚** (`models/`): SQLAlchemy ORMæ¨¡å‹å®šä¹‰
- **æ•°æ®ä»“åº“å±‚** (`repositories/`): æ•°æ®è®¿é—®é€»è¾‘ï¼Œæ”¯æŒé¢„åŠ è½½ä¼˜åŒ–
- **æœåŠ¡å±‚** (`services/`): ä¸šåŠ¡é€»è¾‘å¤„ç†ï¼Œé›†æˆç¼“å­˜å’Œæƒé™éªŒè¯
- **APIè·¯ç”±å±‚** (`api/v1/endpoints/`): HTTPè¯·æ±‚å¤„ç†å’Œå“åº”
- **ç¼“å­˜å±‚** (`services/cache_service.py`): Redisç¼“å­˜ç®¡ç†å’ŒTokené»‘åå•

## ğŸ” å®‰å…¨ç‰¹æ€§

### JWTè®¤è¯æœºåˆ¶
- **RS256ç®—æ³•**: RSAå…¬ç§é’¥ç­¾åéªŒè¯
- **åŒTokenè®¾è®¡**: access_token + refresh_token
- **Tokené»‘åå•**: å®‰å…¨ç™»å‡ºï¼Œé˜²æ­¢Tokené‡ç”¨
- **JTIè¿½è¸ª**: æ¯ä¸ªTokenå”¯ä¸€æ ‡è¯†ï¼Œæ”¯æŒç²¾ç¡®å¤±æ•ˆæ§åˆ¶

### RBACæƒé™æ¨¡å‹
- **ç»†ç²’åº¦æƒé™**: åŸºäºèµ„æºå’Œæ“ä½œçš„æƒé™æ§åˆ¶
- **è§’è‰²ç»§æ‰¿**: æ”¯æŒè§’è‰²å±‚æ¬¡åŒ–ç®¡ç†
- **æƒé™ç¼“å­˜**: æƒé™éªŒè¯ç»“æœç¼“å­˜30åˆ†é’Ÿï¼Œæ€§èƒ½æå‡80%
- **åŠ¨æ€æƒé™**: è¿è¡Œæ—¶æƒé™å˜æ›´ç«‹å³ç”Ÿæ•ˆ

### æ•°æ®å®‰å…¨
- **å¯†ç åŠ å¯†**: Bcrypt + éšæœºç›å€¼
- **è¾“å…¥æ ¡éªŒ**: Pydantic v2ä¸¥æ ¼ç±»å‹æ£€æŸ¥
- **SQLæ³¨å…¥é˜²æŠ¤**: SQLAlchemyå‚æ•°åŒ–æŸ¥è¯¢
- **é™æµä¿æŠ¤**: åŸºäºRedisçš„APIé™æµ

## ğŸš„ æ€§èƒ½ä¼˜åŒ–

### ç¼“å­˜å±‚è®¾è®¡
- **Redisé›†æˆ**: å¼‚æ­¥Rediså®¢æˆ·ç«¯ï¼Œæ”¯æŒè¿æ¥æ± 
- **å¤šå±‚ç¼“å­˜**: ç”¨æˆ·æƒé™ã€è§’è‰²ã€Tokené»‘åå•åˆ†å±‚ç¼“å­˜
- **æ™ºèƒ½å¤±æ•ˆ**: æ•°æ®å˜æ›´æ—¶è‡ªåŠ¨æ¸…ç†ç›¸å…³ç¼“å­˜
- **æ‰¹é‡æ“ä½œ**: æ”¯æŒæ‰¹é‡è®¾ç½®å’Œè·å–ï¼Œå‡å°‘ç½‘ç»œå¼€é”€

### æ•°æ®åº“ä¼˜åŒ–
- **é¢„åŠ è½½æŸ¥è¯¢**: ä½¿ç”¨eager loadingé¿å…N+1æŸ¥è¯¢é—®é¢˜
- **è¿æ¥æ± ç®¡ç†**: SQLAlchemyå¼‚æ­¥è¿æ¥æ± ä¼˜åŒ–
- **ç´¢å¼•è®¾è®¡**: å…³é”®å­—æ®µå»ºç«‹ç´¢å¼•ï¼Œæå‡æŸ¥è¯¢æ€§èƒ½
- **æŸ¥è¯¢ä¼˜åŒ–**: å¤æ‚æŸ¥è¯¢ä½¿ç”¨è”è¡¨é¢„åŠ è½½

### æ€§èƒ½æŒ‡æ ‡
- **æƒé™éªŒè¯**: ç¼“å­˜å‘½ä¸­ç‡90%+ï¼Œå“åº”æ—¶é—´å‡å°‘80%
- **TokenéªŒè¯**: é»‘åå•æ£€æŸ¥<1msï¼Œæ”¯æŒé«˜å¹¶å‘
- **æ•°æ®åº“æŸ¥è¯¢**: é¢„åŠ è½½ä¼˜åŒ–å‡å°‘70%çš„æŸ¥è¯¢æ¬¡æ•°

## ğŸ“Š æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·ç®¡ç†
- âœ… ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€ä¿¡æ¯ç®¡ç†
- âœ… å¤šç§ç™»å½•æ–¹å¼ï¼ˆç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·ï¼‰
- âœ… å¯†ç å¼ºåº¦éªŒè¯å’Œå®‰å…¨å­˜å‚¨
- âœ… ç”¨æˆ·çŠ¶æ€ç®¡ç†ï¼ˆæ¿€æ´»/ç¦ç”¨ï¼‰
- âœ… æ‰¹é‡ç”¨æˆ·æ“ä½œ

### æƒé™ç®¡ç†  
- âœ… RBACæƒé™æ¨¡å‹å®ç°
- âœ… ç»†ç²’åº¦æƒé™æ§åˆ¶
- âœ… åŠ¨æ€æƒé™éªŒè¯è£…é¥°å™¨
- âœ… æƒé™ç¼“å­˜ä¼˜åŒ–
- âœ… æƒé™ç»§æ‰¿å’Œç»„åˆ

### è§’è‰²ç®¡ç†
- âœ… è§’è‰²CRUDæ“ä½œ
- âœ… è§’è‰²æƒé™åˆ†é…
- âœ… ç”¨æˆ·è§’è‰²ç®¡ç†
- âœ… è§’è‰²å±‚æ¬¡åŒ–è®¾è®¡

### å®¡è®¡æ—¥å¿—
- âœ… å®Œæ•´çš„æ“ä½œå®¡è®¡è®°å½•
- âœ… ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
- âœ… ç™»å½•æ—¥å¿—å’Œå®‰å…¨äº‹ä»¶
- âœ… æ—¥å¿—æŸ¥è¯¢å’Œåˆ†æ
- âœ… æ—¥å¿—æ¸…ç†å’Œå½’æ¡£

### è®¤è¯å®‰å…¨
- âœ… JWTåŒTokenæœºåˆ¶
- âœ… Tokené»‘åå•ç®¡ç†
- âœ… å®‰å…¨ç™»å‡ºåŠŸèƒ½
- âœ… ä¼šè¯ç®¡ç†å’Œè¶…æ—¶æ§åˆ¶
- âœ… å¤šè®¾å¤‡ç™»å½•ç®¡ç†

## ğŸ“– æ–‡æ¡£è¯´æ˜

| æ–‡æ¡£                                   | æè¿°                            | é€‚ç”¨å¯¹è±¡   |
| -------------------------------------- | ------------------------------- | ---------- |
| [ğŸš€ å¿«é€Ÿå…¥é—¨](docs/quick_start.md)      | æ–°æ‰‹æ•™ç¨‹ï¼Œä»ç¯å¢ƒæ­å»ºåˆ°APIä½¿ç”¨   | æ–°ç”¨æˆ·     |
| [ğŸ“‹ é¡¹ç›®æ–‡æ¡£](docs/é¡¹ç›®æ–‡æ¡£.md)         | é¡¹ç›®æ•´ä½“ä»‹ç»ã€æ¶æ„è®¾è®¡ã€APIæ¥å£ | å¼€å‘è€…     |
| [ğŸ“¡ APIæ–‡æ¡£](docs/api.md)               | è¯¦ç»†çš„APIæ¥å£è¯´æ˜å’Œä½¿ç”¨ç¤ºä¾‹     | å‰ç«¯å¼€å‘è€… |
| [ğŸš„ ç¼“å­˜æŒ‡å—](docs/cache_guide.md)      | Redisç¼“å­˜ä½¿ç”¨æ–¹æ³•å’Œæœ€ä½³å®è·µ     | åç«¯å¼€å‘è€… |
| [ğŸš€ éƒ¨ç½²æŒ‡å—](docs/deployment_guide.md) | ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ã€é…ç½®å’Œç›‘æ§        | è¿ç»´å·¥ç¨‹å¸ˆ |
| [ğŸ“Š é¡¹ç›®æ€»ç»“](docs/project_summary.md)  | å®Œæ•´åŠŸèƒ½æ¸…å•å’ŒæŠ€æœ¯æ€»ç»“          | æŠ€æœ¯è´Ÿè´£äºº |

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```cmd
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•
pytest tests/test_auth.py

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=app --cov-report=html
```

### æµ‹è¯•è¦†ç›–ç‡
- ç›®æ ‡è¦†ç›–ç‡: â‰¥80%
- å•å…ƒæµ‹è¯•: æ ¸å¿ƒæœåŠ¡å’Œä»“åº“å±‚
- é›†æˆæµ‹è¯•: APIç«¯ç‚¹å’Œè®¤è¯æµç¨‹
- åŠŸèƒ½æµ‹è¯•: å®Œæ•´ä¸šåŠ¡æµç¨‹éªŒè¯

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ
- **ç±»å‹æ³¨è§£**: å¼ºåˆ¶ä½¿ç”¨ç±»å‹æ³¨è§£ï¼ŒPydantic v2æ ¡éªŒ
- **ä»£ç æ ¼å¼**: ä½¿ç”¨Ruffæ ¼å¼åŒ–ï¼Œè¡Œé•¿åº¦100å­—ç¬¦  
- **å‘½åè§„èŒƒ**: 
  - å˜é‡/å‡½æ•°: `snake_case`
  - ç±»: `PascalCase`
  - å¸¸é‡: `UPPER_SNAKE_CASE`
- **æ³¨é‡Šæ–‡æ¡£**: é‡è¦å‡½æ•°å¿…é¡»åŒ…å«docstring

### åˆ†å±‚å¼€å‘è§„èŒƒ
```python
# ä»“åº“å±‚ - åªè´Ÿè´£æ•°æ®è®¿é—®
class UserRepository:
    async def get_with_roles(self, user_id: int) -> Optional[User]:
        """é¢„åŠ è½½ç”¨æˆ·è§’è‰²ä¿¡æ¯"""
        pass

# æœåŠ¡å±‚ - ä¸šåŠ¡é€»è¾‘å¤„ç†  
class UserService:
    async def get_user_with_permissions(self, user_id: int) -> UserWithPermissions:
        """è·å–ç”¨æˆ·åŠå…¶æƒé™ä¿¡æ¯ï¼Œä¼˜å…ˆä»ç¼“å­˜è·å–"""
        pass

# APIå±‚ - åªå¤„ç†HTTPè¯·æ±‚å“åº”
@router.get("/users/{user_id}")
async def get_user(user_id: int, user_service: UserService = Depends()):
    """è·å–ç”¨æˆ·ä¿¡æ¯API"""
    pass
```

### ç¼“å­˜ä½¿ç”¨è§„èŒƒ
```python
# 1. ä¼˜å…ˆä»ç¼“å­˜è·å–
permissions = await cache_service.get_user_permissions(str(user_id))

# 2. ç¼“å­˜æœªå‘½ä¸­æ—¶æŸ¥è¯¢æ•°æ®åº“
if permissions is None:
    permissions = await permission_service.get_user_permissions(user_id)
    await cache_service.set_user_permissions(str(user_id), permissions)

# 3. æ•°æ®å˜æ›´æ—¶æ¸…ç†ç¼“å­˜
await cache_service.invalidate_user_cache(str(user_id))
```

### Gitå·¥ä½œæµ
```
main        # ä¸»åˆ†æ”¯ï¼Œç”Ÿäº§ç¯å¢ƒ
develop     # å¼€å‘åˆ†æ”¯  
feature/*   # åŠŸèƒ½åˆ†æ”¯
hotfix/*    # çƒ­ä¿®å¤åˆ†æ”¯
```

### å¸¸ç”¨å¼€å‘å‘½ä»¤

#### uv åŒ…ç®¡ç†å‘½ä»¤
```cmd
# ç¯å¢ƒç®¡ç†
uv sync                          # åŒæ­¥æ‰€æœ‰ä¾èµ–ï¼ˆåˆ›å»ºç¯å¢ƒ+å®‰è£…ä¾èµ–ï¼‰
uv sync --dev                    # åŒæ­¥åŒ…å«å¼€å‘ä¾èµ–
uv venv                          # ä»…åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ

# ä¾èµ–ç®¡ç†
uv add package-name              # æ·»åŠ è¿è¡Œæ—¶ä¾èµ–
uv add --dev package-name        # æ·»åŠ å¼€å‘ä¾èµ–
uv remove package-name           # ç§»é™¤ä¾èµ–
uv pip list                      # æŸ¥çœ‹å·²å®‰è£…åŒ…
uv pip show package-name         # æŸ¥çœ‹åŒ…è¯¦æƒ…

# é¡¹ç›®è¿è¡Œ
uv run python -m app.main        # ä½¿ç”¨uvè¿è¡Œåº”ç”¨
uv run pytest                    # ä½¿ç”¨uvè¿è¡Œæµ‹è¯•
uv run ruff check app            # ä½¿ç”¨uvè¿è¡Œä»£ç æ£€æŸ¥
```

#### åº”ç”¨ç®¡ç†å‘½ä»¤
```cmd
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python main.py

# æ•°æ®åº“è¿ç§»
alembic init alembic

# ç„¶åä¿®æ”¹ alembic.ini å’Œ alembic\env.py æ–‡ä»¶
alembic revision --autogenerate -m "description"  # ç”Ÿæˆè¿ç§»
alembic upgrade head             # åº”ç”¨æœ€æ–°è¿ç§»

# æµ‹è¯•å’Œä»£ç è´¨é‡
pytest -v --cov=app             # è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡
ruff check app                   # ä»£ç æ£€æŸ¥
ruff format app                  # ä»£ç æ ¼å¼åŒ–
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: Redisè¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
```cmd
# æ£€æŸ¥RedisæœåŠ¡çŠ¶æ€
docker ps | grep redis

# æµ‹è¯•Redisè¿æ¥
redis-cli ping
```

### Q: æ•°æ®åº“è¿ç§»å¤±è´¥ï¼Ÿ
```cmd
# æ£€æŸ¥å½“å‰è¿ç§»çŠ¶æ€
alembic current

# å›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬
alembic downgrade -1

# é‡æ–°æ‰§è¡Œè¿ç§»
alembic upgrade head
```

### Q: TokenéªŒè¯å¤±è´¥ï¼Ÿ
- æ£€æŸ¥JWT_SECRET_KEYé…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤Tokenæ˜¯å¦åœ¨é»‘åå•ä¸­
- éªŒè¯Tokenæ ¼å¼å’Œç­¾åç®—æ³•

### Q: æƒé™éªŒè¯ä¸ç”Ÿæ•ˆï¼Ÿ
- æ£€æŸ¥ç”¨æˆ·è§’è‰²åˆ†é…æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æƒé™ç¼“å­˜æ˜¯å¦å¤±æ•ˆ
- éªŒè¯æƒé™è£…é¥°å™¨ä½¿ç”¨æ˜¯å¦æ­£ç¡®

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤å˜æ›´ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“§ è”ç³»æ–¹å¼

- é¡¹ç›®åœ°å€: 
  - Gitee: https://gitee.com/lijianqiao/FastApi_admin
  - Github: https://github.com/lijianqiao/FastApi_admin
- é—®é¢˜åé¦ˆ: 
  - Gitee: https://gitee.com/lijianqiao/FastApi_admin/issues
  - Github: https://github.com/lijianqiao/FastApi_admin/issues
- é‚®ç®±: lijianqiao2906@live.com

---

â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ªStarï¼